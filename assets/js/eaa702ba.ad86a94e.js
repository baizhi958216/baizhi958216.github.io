"use strict";(self.webpackChunkbaizhi_wiki=self.webpackChunkbaizhi_wiki||[]).push([[415],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>c});var o=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(null==e)return{};var t,o,n=function(e,a){if(null==e)return{};var t,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var i=o.createContext({}),l=function(e){var a=o.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):p(p({},a),e)),t},m=function(e){var a=l(e.components);return o.createElement(i.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},s=o.forwardRef((function(e,a){var t=e.components,n=e.mdxType,r=e.originalType,i=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),s=l(t),c=n,y=s["".concat(i,".").concat(c)]||s[c]||u[c]||r;return t?o.createElement(y,p(p({ref:a},m),{},{components:t})):o.createElement(y,p({ref:a},m))}));function c(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var r=t.length,p=new Array(r);p[0]=s;var d={};for(var i in a)hasOwnProperty.call(a,i)&&(d[i]=a[i]);d.originalType=e,d.mdxType="string"==typeof e?e:n,p[1]=d;for(var l=2;l<r;l++)p[l]=t[l];return o.createElement.apply(null,p)}return o.createElement.apply(null,t)}s.displayName="MDXCreateElement"},4619:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>p,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>l});var o=t(7462),n=(t(7294),t(3905));const r={},p="\u6302\u8f7d payload.bin \u91cc\u7684\u51e0\u4e2a\u5206\u533a",d={unversionedId:"android/Mount-payloads-partations",id:"android/Mount-payloads-partations",title:"\u6302\u8f7d payload.bin \u91cc\u7684\u51e0\u4e2a\u5206\u533a",description:"A/B, vA/B \u673a\u578b\u7684\u7cfb\u7edf\u66f4\u65b0\u5305\u91cc\u9762\u4e0d\u518d\u662f\u4f20\u7edf\u7684system.img, vendor.img, product,img...,",source:"@site/docs/android/Mount-payloads-partations.md",sourceDirName:"android",slug:"/android/Mount-payloads-partations",permalink:"/docs/android/Mount-payloads-partations",draft:!1,editUrl:"https://github.com/baizhi958216/baizhi958216/tree/docusaurus/docs/android/Mount-payloads-partations.md",tags:[],version:"current",frontMatter:{},sidebar:"android",previous:{title:"\u8f6c\u50a8\u5237\u673a\u5305\u91cc\u7684 payload.bin",permalink:"/docs/android/Dump-android-payload"},next:{title:"Hi",permalink:"/docs/android/intro"}},i={},l=[{value:"\u4f7f\u7528<code>payload-dumper-go</code>",id:"\u4f7f\u7528payload-dumper-go",level:2},{value:"\u514b\u9686payload-dumper-go",id:"\u514b\u9686payload-dumper-go",level:3},{value:"\u5b89\u88c5 go",id:"\u5b89\u88c5-go",level:3},{value:"\u7f16\u8bd1 payload-dumper-go",id:"\u7f16\u8bd1-payload-dumper-go",level:3},{value:"\u5206\u79bb payload.bin",id:"\u5206\u79bb-payloadbin",level:2},{value:"\u6302\u8f7d\u5206\u533a",id:"\u6302\u8f7d\u5206\u533a",level:2}],m={toc:l};function u(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",(0,o.Z)({},m,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"\u6302\u8f7d-payloadbin-\u91cc\u7684\u51e0\u4e2a\u5206\u533a"},"\u6302\u8f7d payload.bin \u91cc\u7684\u51e0\u4e2a\u5206\u533a"),(0,n.kt)("p",null,"A/B, vA/B \u673a\u578b\u7684\u7cfb\u7edf\u66f4\u65b0\u5305\u91cc\u9762\u4e0d\u518d\u662f\u4f20\u7edf\u7684",(0,n.kt)("inlineCode",{parentName:"p"},"system.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"vendor.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"product,img"),"...,",(0,n.kt)("br",{parentName:"p"}),"\n","\u53d6\u800c\u4ee3\u4e4b\u7684\u662f",(0,n.kt)("inlineCode",{parentName:"p"},"payload.bin"),", \u91cc\u9762\u5305\u542b\u4e86\u6240\u6709\u5728\u8bbe\u5907\u6811\u4e2d\u5b9a\u4e49",(0,n.kt)("inlineCode",{parentName:"p"},"AB_OTA_PARTITIONS"),"\u5206\u533a",(0,n.kt)("br",{parentName:"p"}),"\n",(0,n.kt)("a",{parentName:"p",href:"https://source.android.com/devices/tech/ota/ab/ab_implement"},"\u5b9e\u73b0 A/B \u66f4\u65b0 ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-makefile"},"AB_OTA_PARTITIONS := \\\n  boot \\\n  system \\\n  bootloader\n")),(0,n.kt)("p",null,"\u56e0\u4e3a\u51fa\u4e8e\u67d0\u4e9b\u60c5\u51b5, \u6211\u4eec\u9700\u8981\u628a\u4ed6\u4eec\u89e3\u51fa\u6765."),(0,n.kt)("h2",{id:"\u4f7f\u7528payload-dumper-go"},"\u4f7f\u7528",(0,n.kt)("inlineCode",{parentName:"h2"},"payload-dumper-go")),(0,n.kt)("p",null,"\u8fd9\u91cc\u53ef\u4ee5\u7528\u4e00\u4e2a\u53eb",(0,n.kt)("a",{parentName:"p",href:"https://github.com/ssut/payload-dumper-go"},"payload-dumper-go"),"\u7684\u5de5\u5177\n\u5982\u679c\u5728\u7528 ArchLinux, \u606d\u559c\u4f60\u53ef\u4ee5\u5728 ",(0,n.kt)("a",{parentName:"p",href:"https://aur.archlinux.org/packages/payload-dumper-go"},"AUR")," \u627e\u5230, \u5982\u679c\u4e0d\u662f:"),(0,n.kt)("h3",{id:"\u514b\u9686payload-dumper-go"},"\u514b\u9686",(0,n.kt)("a",{parentName:"h3",href:"https://github.com/ssut/payload-dumper-go"},"payload-dumper-go")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo ~]$  git clone https://github.com/ssut/payload-dumper-go.git\n[baizhi958216@Lenovo ~]$ cd payload-dumper-go\n[baizhi958216@Lenovo payload-dumper-go]$\n")),(0,n.kt)("h3",{id:"\u5b89\u88c5-go"},"\u5b89\u88c5 go"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo payload-dumper-go]$ sudo pacman -S go\n")),(0,n.kt)("h3",{id:"\u7f16\u8bd1-payload-dumper-go"},"\u7f16\u8bd1 payload-dumper-go"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u786e\u4fdd\u5df2\u7ecf\u5728 ",(0,n.kt)("inlineCode",{parentName:"li"},"payload-dumper-go")," \u7684\u6587\u4ef6\u5939\u5185"),(0,n.kt)("li",{parentName:"ul"},"\u786e\u4fdd\u5df2\u7ecf\u5b89\u88c5",(0,n.kt)("inlineCode",{parentName:"li"},"go")),(0,n.kt)("li",{parentName:"ul"},"\u786e\u4fdd\u7ec8\u7aef\u8fde\u63a5",(0,n.kt)("inlineCode",{parentName:"li"},"github"),"\u901f\u5ea6\u6b63\u5e38")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo payload-dumper-go]$  go mod tidy\n[baizhi958216@Lenovo payload-dumper-go]$  CGO_ENABLE=0 go build -trimpath -o ./payload-dumper-go\n")),(0,n.kt)("p",null,"\u53ef\u6267\u884c\u6587\u4ef6\u751f\u6210\u5728",(0,n.kt)("inlineCode",{parentName:"p"},"./payload-dumper-go")),(0,n.kt)("h2",{id:"\u5206\u79bb-payloadbin"},"\u5206\u79bb payload.bin"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo payload-dumper-go]$ ./payload-dumper-go ../payload.bin\npayload.bin: ../payload.bin\nPayload Version: 2\nPayload Manifest Length: 163495\nPayload Manifest Signature Length: 267\nFound partitions:\nboot (101 MB), dtbo (25 MB), odm (1.0 MB), product (374 MB), system (3.2 GB), system_ext (472 MB), vbmeta (8.2 kB), vbmeta_system (4.1 kB), vendor (1.4 GB), vendor_boot (101 MB), cpucp (106 kB), aop (246 kB), hyp (3.6 MB), uefisecapp (127 kB), tz (3.8 MB), bluetooth (1.1 MB), keymaster (283 kB), qupfw (57 kB), shrm (49 kB), modem (183 MB), xbl (3.7 MB), logo (45 MB), abl (168 kB), featenabler (90 kB), xbl_config (221 kB), dsp (67 MB), devcfg (53 kB)\nNumber of workers: 4\nboot (101 MB)           [===========================================================================================================================] 100 %\nodm (1.0 MB)            [===========================================================================================================================] 100 %\ndtbo (25 MB)            [===========================================================================================================================] 100 %\nproduct (374 MB)        [===========================================================================================================================] 100 %\nsystem (3.2 GB)         [===========================================================================================================================] 100 %\nsystem_ext (472 MB)     [===========================================================================================================================] 100 %\nvbmeta (8.2 kB)         [===========================================================================================================================] 100 %\nvbmeta_system (4.1 kB)  [===========================================================================================================================] 100 %\nvendor (1.4 GB)         [===========================================================================================================================] 100 %\nvendor_boot (101 MB)    [===========================================================================================================================] 100 %\ncpucp (106 kB)          [===========================================================================================================================] 100 %\naop (246 kB)            [===========================================================================================================================] 100 %\nhyp (3.6 MB)            [===========================================================================================================================] 100 %\nuefisecapp (127 kB)     [===========================================================================================================================] 100 %\ntz (3.8 MB)             [===========================================================================================================================] 100 %\nbluetooth (1.1 MB)      [===========================================================================================================================] 100 %\nkeymaster (283 kB)      [===========================================================================================================================] 100 %\nqupfw (57 kB)           [===========================================================================================================================] 100 %\nshrm (49 kB)            [===========================================================================================================================] 100 %\nmodem (183 MB)          [===========================================================================================================================] 100 %\nxbl (3.7 MB)            [===========================================================================================================================] 100 %\nlogo (45 MB)            [===========================================================================================================================] 100 %\nabl (168 kB)            [===========================================================================================================================] 100 %\nfeatenabler (90 kB)     [===========================================================================================================================] 100 %\nxbl_config (221 kB)     [===========================================================================================================================] 100 %\ndsp (67 MB)             [===========================================================================================================================] 100 %\ndevcfg (53 kB)          [===========================================================================================================================] 100 %\n[baizhi958216@Lenovo payload-dumper-go]$\n\n")),(0,n.kt)("p",null,"\u5206\u79bb\u51fa\u6765\u7684\u5206\u533a\u4f1a\u5728\u5f53\u524d",(0,n.kt)("inlineCode",{parentName:"p"},"extracted_***_***"),"\u76ee\u5f55\u4e0b"),(0,n.kt)("h2",{id:"\u6302\u8f7d\u5206\u533a"},"\u6302\u8f7d\u5206\u533a"),(0,n.kt)("p",null,"\u8fd9\u91cc\u6211\u53ea\u9700\u8981",(0,n.kt)("inlineCode",{parentName:"p"},"system.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"vendor.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"product.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"system_ext.img"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"odm.img")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo extracted_payload]$ mkdir system/\n[baizhi958216@Lenovo extracted_payload]$ sudo mount -o ro system.img system/\n[baizhi958216@Lenovo extracted_payload]$ sudo mount -o ro vendor.img system/vendor/\n[baizhi958216@Lenovo extracted_payload]$ sudo mount -o ro product.img system/product/\n[baizhi958216@Lenovo extracted_payload]$ sudo mount -o ro system_ext.img system/system_ext/\n[baizhi958216@Lenovo extracted_payload]$ sudo mount -o ro odm.img system/odm/\n")),(0,n.kt)("p",null,"\u53ef\u4ee5\u7528",(0,n.kt)("inlineCode",{parentName:"p"},"df"),"\u67e5\u770b\u6302\u8f7d\u60c5\u51b5"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"[baizhi958216@Lenovo extracted_payload]$ df\n\u6587\u4ef6\u7cfb\u7edf          1K\u7684\u5757      \u5df2\u7528      \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9\ndev              7858236         0   7858236    0% /dev\nrun              7866360      1660   7864700    1% /run\n/dev/nvme0n1p2 490617784 297320884 168301420   64% /\ntmpfs            7866360     95508   7770852    2% /dev/shm\ntmpfs            7866360     12828   7853532    1% /tmp\n/dev/nvme0n1p1    523248     69140    454108   14% /boot\ntmpfs            1573272        64   1573208    1% /run/user/1000\n/dev/loop0       3057476   3048196         0  100% /home/baizhi958216/dev/meizu/extracted_payload/system\n/dev/loop1       1330920   1326932         0  100% /home/baizhi958216/dev/meizu/extracted_payload/system/vendor\n/dev/loop2        359020    357932         0  100% /home/baizhi958216/dev/meizu/extracted_payload/system/product\n/dev/loop3        453424    452048         0  100% /home/baizhi958216/dev/meizu/extracted_payload/system/system_ext\n/dev/loop4           896       892         0  100% /home/baizhi958216/dev/meizu/extracted_payload/system/odm\n")))}u.isMDXComponent=!0}}]);